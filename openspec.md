# OpenSpec: GridClicker

> **版本**: 1.2.0
> **类型**: macOS 辅助功能工具 / 守护进程 (Daemon)
> **语言**: Swift
> **状态**: 稳定版 (Stable)

## 1. 项目概述
GridClicker 是一款专为 macOS 设计的全键盘鼠标控制工具。它采用 **Passive Overlay (被动覆盖层)** 架构，确保在操作过程中不抢占目标窗口的焦点，从而实现完美的滚动、点击和拖拽穿透体验。

## 2. 核心功能

### 2.1 全局唤起
- **触发**: 快速轻敲 **左 Command (⌘)**。
- **特性**: 立即显示全屏网格。窗口透明且不响应鼠标，不干扰底层应用焦点。

### 2.2 导航与微调
- **AA-ZZ**: 双字母快速定位。
- **HJKL**: 像素级光标移动。
- **O 键**: 进入滚动模式 (Scroll Mode)，使用 J/K 滚动页面。

### 2.3 动作执行 (Persistent Mode)
- **Space (空格)**: 左键单击（操作后界面保留）。
- **M 键**: 右键单击（操作后界面保留）。
- **T 键 (Hold)**: 
    - 按住 T 键进入拖拽模式（模拟左键按下）。
    - 配合 HJKL 移动光标以拖动窗口或文件。
    - 松开 T 键结束拖拽。
- **Enter (复制并退出)**:
    - 发送 `Cmd+C` 复制选中内容并隐藏。
- **ESC**: 唯一退出入口，隐藏网格并停止拦截。

### 2.4 状态提示 (Status Overlay)
- 界面右上角实时显示当前模式的操作快捷键指南。

## 3. 技术实现 (Architecture)

### 3.1 Passive Overlay 模式
- 窗口属性设为 `ignoresMouseEvents = true` 和 `.nonactivatingPanel`。

### 3.2 Global Event Tap
- 使用 `CGEvent.tapCreate` 拦截键盘。
- **安全性**: 所有非目标按键及修饰键均直接透传，防止键盘失控。

## 4. 快捷键速查
| 模式 | 按键 | 功能 |
| :--- | :--- | :--- |
| **全局** | `Left Cmd` (Tap) | 显示/隐藏网格 |
| **网格选择** | `A-Z` | 输入坐标 |
| **微调模式** | `H / J / K / L` | 移动光标 |
| | `Space` | 左键点击 (界面保留) |
| | `M` | 右键点击 (界面保留) |
| | `T` (Hold) | 拖拽模式 |
| | `Enter` | 复制并退出 |
| | `O` | 进入滚动模式 |
| **滚动模式** | `J / K` | 下滚 / 上滚 |
| **通用** | `Esc` | 隐藏/退出 |

## 5. 项目结构
- `src/main.swift`: 核心源码。
- `scripts/build.sh`: 编译脚本。
- `dist/GridClicker.app`: 可执行应用。
